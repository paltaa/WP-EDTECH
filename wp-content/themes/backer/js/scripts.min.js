/* ALL THE SCRIPTS IN THIS FILE ARE MADE BY KROWNTHEMES.COM AND ARE LICENSED UNDER ENVATO'S REGULAR/EXTENDED LICENSE --- REDISTRIBUTION IS NOT ALLOWED! */
(function(a){a(document).ready(function(){function F(){B.each(function(){var b="#"+a(this).attr("id");a(".krown-tabs").children(".contents").children("div").css("display","block");if(a(this).hasClass("carousel")){var c=a(this),e=a(this).find(".carousel-holder"),f=a(this).find(".krown-id-item"),d=a(this).find(".btn-next"),g=a(this).find(".btn-prev"),k=0,k="block"==v.css("display")?2:"block"==w.css("display")?3:parseInt(e.data("visible"));c.width();parseInt(f.eq(0).css("marginLeft"));Math.ceil(f.length/ k);var p=!0;e.css("position","absolute");e.parent().css("height",e.height());f.css("left",0);c.data({items:f,visNo:e.data("visible"),visWidth:c.width()+2*parseInt(f.eq(0).css("marginLeft")),page:0,pages:Math.ceil(f.length/k)-1});c.cjSwipe("on",function(a){a?d.trigger("click"):g.trigger("click")});d.on("click",function(b){var c=a(this).closest(".carousel"),e=c.data("items"),f=c.data("page"),k=c.data("pages"),h=c.data("visNo"),l=c.data("visWidth");if(p&&f+1<=k){p=!1;c.data("page",++f);f+1<=k?d.removeClass("disabled"): d.addClass("disabled");0<=f-1?g.removeClass("disabled"):g.addClass("disabled");var m=0,n=(f-1)*h;a.grep(e,function(a,b){b>=n?e.eq(b).stop().delay(50*m++).animate({left:-l*f},200,"easeInQuint"):e.eq(b).stop().animate({left:-l*f},0)});setTimeout(function(){p=!0},100*h+200)}b.preventDefault()});g.on("click",function(b){var c=a(this).closest(".carousel"),e=c.data("items"),f=c.data("page"),k=c.data("pages"),h=c.data("visNo"),l=c.data("visWidth");if(p&&0<=f-1){p=!1;c.data("page",--f);f+1<=k?d.removeClass("disabled"): d.addClass("disabled");0<=f-1?g.removeClass("disabled"):g.addClass("disabled");var m=(f+2)*h-1,n=m+1;a.grep(e,function(a,b){b<n?e.eq(b).stop().delay(50*m--).animate({left:-l*f},200,"easeInQuint"):e.eq(b).stop().animate({left:-l*f},0)});setTimeout(function(){p=!0},100*h+200)}b.preventDefault()}).addClass("disabled")}else a(this).imagesLoaded(function(){a(b).isotope({itemSelector:".krown-id-item",layoutMode:"masonry"})});setTimeout(function(){a(".krown-tabs").children(".contents").children("div:nth-child(1n+2)").css("display", "none")},a(this).hasClass("carousel")?100:1E3)})}function G(){a(".krown-pie").each(function(){function b(a,b){k=0;clearInterval(g);d.stop();var f=0,e=b/a;d.start(5);g=setInterval(function(){k+=.0025;f=Math.floor(100*k*e);k>=a/100&&(d.stop(),clearInterval(g),k=0);c.html(f+"<sup>%</sup>")},5)}var c=a(this).find(".value"),e=a(this).find(".pie-canvas")[0],f=a(this).data("color"),d=a(this).hasClass("large")?new ProgressCircle({canvas:e,minRadius:115,arcWidth:18,centerX:136,centerY:136}):new ProgressCircle({canvas:e, minRadius:52,arcWidth:6,centerX:62,centerY:60}),g,k=0;d.addEntry({fillColor:f,progressListener:function(){return k}});"0"!=parseInt(c.data("percent"))&&b(Math.min(parseInt(c.data("percent")),100),parseInt(c.text()))})}var H=a("html"),n=a("body"),x=a("#main-menu"),m=a("#main-search #searchform"),z="ontouchstart"in window;z&&n.removeClass("no-touch").addClass("touch");n.removeClass("no-js");var h="";x.children(".top-menu").children("li").each(function(){var b=a(this).children("a");h+='<option data-href="'+ b.prop("href")+'"'+("blank"==b.prop("target")?' data-target="_blank"':"")+">"+b.text()+"</option>";a(this).hasClass("parent")&&a(this).find("ul").find("a").each(function(){h+='<option data-href="'+a(this).prop("href")+'"'+("blank"==a(this).prop("target")?' data-target="_blank"':"")+"> -- "+a(this).text()+"</option>"})});x.append('<div class="responsive-menu"><select class="responsive-select"><option>'+x.data("nav-text")+"</option>"+h+"</select></div>");a(".responsive-menu").children("select").on("change", function(){var b=a(this).find("option:selected").data("href");void 0==a(this).find("option:selected").data("target")?document.location.href=b:window.open(b,"_blank")});x.find("li").hover(function(){0<a(this).children("div").length&&a(this).children("div").stop().slideDown(150,function(){a(this).css("overflow","visible")})},function(){0<a(this).children("div").length&&a(this).children("div").stop().slideUp(100)}).each(function(){var b=a(this).children("div");if(0<b.length){var c=200;b.css("display", "block");b.children("li").each(function(){a(this).addClass("menu-fix");a(this).width()>c&&(c=a(this).width());a(this).removeClass("menu-fix")});b.css("display","none").width(c);b.find("div").css("left",c)}});m.find(".krown-icon-search").click(function(b){m.hasClass("opened")?(m.removeClass("opened"),a("html").off("click.searchout")):(m.addClass("opened"),a("html").on("click.searchout",function(){m.removeClass("opened")}));b.stopPropagation()});m.find("#s").each(function(){a(this).data("value",a(this).val()).focus(function(){a(this).addClass("focusInput"); a(this).val()==a(this).data("value")?a(this).val(""):a(this).select()}).blur(function(){a(this).removeClass("focusInput");""==a(this).val()&&a(this).val(a(this).data("value"))}).click(function(a){a.stopPropagation()})});if(0<a("#custom-header .cta").length&&z){var q=null;a("#custom-header .cta").click(function(){a(this).hasClass("hover")?(q=null,a(this).removeClass("hover")):(null!=q&&q.removeClass("hover"),q=a(this),q.addClass("hover"))})}var B=a(".krown-id-grid");if(0<a(".krown-id-grid").length){n.append('<div id="responsive-test"><div id="p780"></div><div id="p580"></div><div>'); var w=a("#p780"),v=a("#p580");a(".krown-id-grid").imagesLoaded(function(){F()});var C=a(window).width();a(window).on("resize",function(){C!=a(window).width()&&(C=a(window).width(),B.each(function(){if(a(this).hasClass("carousel")){var b=a(this).find(".carousel-holder"),c=a(this).find(".krown-id-item"),e=0,e=a(this).closest(".krown-tabs"),f=e.children(".contents").children("div");f.each(function(){a(this).data("display",a(this).css("display")).css("display","block")});b.css("position","absolute"); b.parent().css("height",b.height());e="block"==v.css("display")?2:"block"==w.css("display")?3:parseInt(b.data("visible"));a(this).data({items:c,visNo:e,visWidth:a(this).width()+2*parseInt(c.eq(0).css("marginLeft")),page:0,pages:Math.ceil(c.length/e)-1});c.css("left",0);a(this).find(".btn-prev").addClass("disabled");a(this).find(".btn-next").removeClass("disabled");f.each(function(){a(this).css("display",a(this).data("display"))})}else e=a(this).closest(".krown-tabs"),f=e.children(".contents").children("div"), f.each(function(){"yes"!=a(this).data("lock")&&(a(this).data("lock","yes"),a(this).data("display",a(this).css("display")).css("display","block"))}),setTimeout(function(){f.each(function(){a(this).css("display",a(this).data("display")).data("lock","no")})},1E3)}))})}if(n.hasClass("single-ignition_product")){var d=a("#project-sidebar");d.find(".product-wrapper, .id-product-proposed-end, .btn-container").wrapAll('<div class="panel clearfix">');d.find(".id-widget.ignitiondeck").removeClass("ignitiondeck"); d.find("#project-p-author").appendTo(d.find(".separator"));d.find(".poweredbyID").appendTo(d);d.find(".main-btn").addClass("krown-button medium color");d.find(".id-progress-raised, .id-product-funding, .id-product-total, .id-product-pledges, .id-product-days, .id-product-days-to-go").wrapAll('<div class="rholder">');d.find(".id-progress-raised, .id-product-funding").wrapAll('<div class="rpdata">');d.find(".id-product-total, .id-product-pledges").wrapAll('<div class="rpdata">');d.find(".id-product-days, .id-product-days-to-go").wrapAll('<div class="rpdata">'); d.find(".product-wrapper").addClass("clearfix");a(".id-level-desc:empty").remove();a(".ignitiondeck.idstretch").prev().addClass("idst");a(".id-widget .progress-percentage, .idstretch-percentage").each(function(){var b=parseInt(a(this).text().replace(",","")),c=99<b?themeObjects.pieColor3:themeObjects.pieColor2;a(this).hasClass("idstretch-percentage")&&(c=99<b?themeObjects.pieColor3:themeObjects.pieColor1);a(this).parent().html('<div class="krown-pie '+(a(this).hasClass("idstretch-percentage")?"small": "large")+'" data-color="'+c+'"><div class="holder"><span class="value" data-percent="'+b+'">'+b+"</span></div></div>")});d.find(".id-widget .krown-pie").clone().prependTo(d.find(".rtitle"));d.find(".rtitle").find(".krown-pie").removeClass("large").addClass("small");var r=a("#page-title"),l=d.find(".btn-container"),D=0<l.find("a").length?!0:!1,A=90,y=!1,t=!0;n.append('<div id="responsive-test"><div id="p780"></div><div id="p580"></div><div>');w=a("#p780");v=a("#p580");D||(d.css("paddingBottom","0"), A=-10);d.find(".rtitle").click(function(){if(t)if(t=!1,y)a(this).removeClass("opened"),l.css("display","none"),d.stop().animate({height:100},{duration:250,easing:"easeInQuad",step:function(a){r.css("paddingTop",a-10)},complete:function(){t=!0}}),y=!1;else{a(this).addClass("opened");d.css("height","auto");var b=d.outerHeight();d.css("height",100);d.stop().animate({height:b},{duration:350,easing:"easeInQuad",step:function(a){r.css("paddingTop",a-10)},complete:function(){t=!0;l.css({top:d.outerHeight()- 225,display:"block"})}});y=!0}});a(window).resize(function(){"block"==w.css("display")||"block"==v.css("display")?(D||(d.css("paddingBottom","0"),A=-10),y?(d.css("height","auto"),r.css("paddingTop",d.height()+A),l.css("top",d.height()-125),l.css("display","block")):(d.css("height",100),r.css("paddingTop",90),l.css("display","none"))):(r.css("paddingTop",0),d.css("height","auto"),l.css("display","block"));t=!0})}a(".backer_title .id-backer-links").appendTo(".backer_title");if(0<a(".dashboardmenu").length){var E= a(".dashboardmenu").find("li"),h='<div class="tabs-select"><select>';E.each(function(){h+="<option>"+a(this).find("a").text()+"</option>"});h+="</select></div>";a(".dashboardmenu").append(h).find(".tabs-select").find("select").change(function(){document.location.href=E.eq(a(this).find("option:selected").index()).find("a").prop("href")});a("#edit-profile").find(".form-row:nth-of-type(1), .form-row:nth-of-type(4), .form-row:nth-of-type(6), .form-row:nth-of-type(8), .form-row:nth-of-type(11)").addClass("first")}0< a(".insert-map").length&&a(".insert-map").each(function(){var b=a(this),c,e=[{featureType:"all",elementType:"all",stylers:[{saturation:-100}]}];c={zoom:b.data("zoom"),center:new google.maps.LatLng(b.data("map-lat"),b.data("map-long")),streetViewControl:!1,scrollwheel:!1,panControl:!0,mapTypeControl:!1,overviewMapControl:!1,zoomControl:!1,draggable:z?!1:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE},mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,"krownMap"]}};c= new google.maps.Map(document.getElementById(b.attr("id")),c);"d-true"==b.data("greyscale")&&(e=new google.maps.StyledMapType(e,{name:"Grayscale"}),c.mapTypes.set("krownMap",e),c.setMapTypeId("krownMap"));"d-true"==b.data("marker")&&(e=new google.maps.LatLng(b.data("map-lat"),b.data("map-long")),new google.maps.Marker({position:e,map:c,icon:b.data("marker-img")}));setTimeout(function(){b.animate({opacity:1},400).parent().addClass("remove-preloader")},2E3)});a("p:empty").remove();a("#content").fitVids(); a(".krown-accordion").each(function(){var b=a(this).hasClass("toggle")?!0:!1,c=a(this).children("section"),e="-1"==a(this).data("opened")?null:c.eq(parseInt(a(this).data("opened")));null!=e&&(e.addClass("opened"),e.children("div").slideDown(0));a(this).children("section").children("h5").click(function(){var c=a(this).parent();b||null==e||(e.removeClass("opened"),e.children("div").stop().slideUp(300));c.hasClass("opened")&&b?(c.removeClass("opened"),c.children("div").stop().slideUp(300)):c.hasClass("opened")|| (e=c,c.addClass("opened"),c.children("div").stop().slideDown(300))})});a(".krown-form").each(function(){function b(a){a.removeClass("contact-error-border");h.fadeOut()}var c=a(this).find("form"),e=a(this).find(".name"),f=a(this).find(".email"),d=a(this).find(".subject"),g=a(this).find(".message"),k=a(this).find(".success-message"),h=a(this).find(".error-message");e.focus(function(){b(a(this))});f.focus(function(){b(a(this))});d.focus(function(){b(a(this))});g.focus(function(){b(a(this))});c.submit(function(b){function l(a){a.val(a.data("value")); a.addClass("contact-error-border");h.fadeIn()}var m=!0,n=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(3>e.val().length||e.val()==e.data("value"))l(e),m=!1;""!=f.val()&&f.val()!=f.data("value")&&n.test(f.val())||(l(f),m=!1);if(5>g.val().length||g.val()==g.data("value"))l(g),m=!1;a(this).hasClass("full")&&(3>d.val().length||d.val()==d.data("value"))&&(l(d),m=!1);m&&(c.fadeOut(),a.ajax({type:c.prop("method"),url:c.prop("action"),data:c.serialize(),success:function(){k.fadeIn()}}));b.preventDefault()})}); a("img.alignleft, img.alignright, img.aligncenter").parent("a").each(function(){a(this).attr("class","fancybox fancybox-thumb "+a(this).children("img").attr("class"))});(0<a(".fancybox").length||0<a('div[id*="attachment"]').length)&&a('.fancybox, div[id*="attachment"] > a').fancybox({padding:0,margin:50,aspectRatio:!0,scrolling:"no",mouseWheel:!1,openMethod:"zoomIn",closeMethod:"zoomOut",nextEasing:"easeInQuad",prevEasing:"easeInQuad"}).append("<span></span>");0<a(".krown-pie").length&&!H.hasClass("ie8")&& (a(".krown-pie").each(function(){var b=a(this).hasClass("large")?274:122;a(this).find(".holder").append('<div class="pie-holder"><canvas class="pie-canvas" width="'+b+'" height="'+b+'"></canvas></div>')}),G());a(".krown-tabs").each(function(){var b=a(this).children(".titles").children("li"),c=a(this).children(".contents").children("div"),e=b.eq(0),d=c.eq(0),h=a(this).hasClass("fade")?"fade":"tab";e.addClass("opened");d.stop().slideDown(0);b.find("a").prop("href","#").off("click");b.click(function(b){e.removeClass("opened"); e=a(this);e.addClass("opened");"fade"==h?(d.stop().fadeOut(250),d=c.eq(a(this).index()),d.stop().delay(250).fadeIn(300)):(d.stop().slideUp(250),d=c.eq(a(this).index()),d.stop().delay(250).slideDown(300));l&&k.val(a(this).text());b.preventDefault()});if(a(this).hasClass("responsive-on")){var g='<div class="tabs-select"><select>';b.each(function(){g+="<option>"+a(this).find("h5").text()+"</option>"});g+="</select></div>";a(this).children(".titles").append(g).find(".tabs-select").find("select").change(function(){b.eq(a(this).find("option:selected").index()).trigger("click")})}var k= a(this).find(".tabs-select").find("select"),l=a(this).hasClass("responsive-on")?!0:!1});a(".krown-twitter.rotenabled").each(function(){var b=a(this).children("ul").children("li"),c=0;setInterval(function(){b.eq(c).fadeOut(250);++c==b.length&&(c=0);b.eq(c).delay(260).fadeIn(300)},6E3)});a(".flexslider.mini").each(function(){var b=a(this);1<b.find("li").length?a(this).flexslider({animation:"slider",easing:"easeInQuad",animationSpeed:300,slideshow:!0,directionNav:!0,controlNav:!1,keyboard:!1,prevText:"", nextText:"",start:function(a){a.container.delay(300).animate({opacity:1},300)}}):b.removeClass("flexslider")});a(".rev_slider_wrapper").find("video").data("no-mejs","true");0<a("#content").find("audio, video").length&&(a("#content").find("video").attr({width:"100%",height:"100%",style:"width:100%;height:100%"}),a("#content").find("audio, video").each(function(){"true"!=a(this).data("no-mejs")&&a(this).mediaelementplayer({alwaysShowControls:!1,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1, enableKeyboard:!1,pluginPath:themeObjects.base+"/js/mediaelement/",success:function(){a(window).trigger("resize")}})}));a("select.responsive-select").styledSelect({coverClass:"responsive-design-cover",innerClass:"responsive-design-inner"});a(".tabs-select select").styledSelect({coverClass:"tabs-select-cover",innerClass:"tabs-select-inner"});a.cookie("dpi",1<window.devicePixelRatio,{expires:365,path:"/"});var u=a("#top");u.click(function(b){a("html,body").animate({scrollTop:0},500,"easeInQuad");b.preventDefault()}); a(window).on("scroll.menu",function(){500>a(this).scrollTop()&&u.hasClass("show")?u.removeClass("show"):500<a(this).scrollTop()&&!u.hasClass("show")&&u.addClass("show")});a(window).trigger("scroll")})})(jQuery);